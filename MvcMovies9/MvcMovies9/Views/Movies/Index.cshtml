@model IEnumerable<MvcMovies9.Models.Movie>
@{
ViewData["Title"] = "Movies";
}
<h1>Movies</h1>
@if (TempData["Flash"] is string msg) { <div class="alert alert-success">@msg</div> }
<form method="get" class="mb-3">
<input name="search" placeholder="Search by title" value="@Context.Request.Query["search"]" />
<input name="genre" placeholder="Genre" value="@Context.Request.Query["genre"]" />
<button type="submit" class="btn btn-primary">Search</button>
<a asp-action="Create" class="btn btn-link">+ New movie</a>
</form>
<div class="mb-2">
    Sort:
    <a asp-action="Index" asp-route-sort="price_asc" asp-route-search="@Context.Request.Query["search"]" asp-
       route-genre="@Context.Request.Query["genre"]">Price ↑</a> ·
    <a asp-action="Index" asp-route-sort="price_desc" asp-route-search="@Context.Request.Query["search"]" asp-
       route-genre="@Context.Request.Query["genre"]">Price ↓</a> ·
    <a asp-action="Index" asp-route-sort="date_asc" asp-route-search="@Context.Request.Query["search"]" asp-
       route-genre="@Context.Request.Query["genre"]">Date ↑</a> ·
    <a asp-action="Index" asp-route-sort="date_desc" asp-route-search="@Context.Request.Query["search"]" asp-
       route-genre="@Context.Request.Query["genre"]">Date ↓</a>
    <a asp-action="Index" asp-route-sort="rating_asc" asp-route-search="@Context.Request.Query["search"]" asp-
       route-genre="@Context.Request.Query["genre"]">Rating ↑</a> ·
    <a asp-action="Index" asp-route-sort="rating_desc" asp-route-search="@Context.Request.Query["search"]" asp-
       route-genre="@Context.Request.Query["genre"]">Rating ↓</a>
</div>
<table class="table">
<thead><tr><th>Title</th><th>Genre</th><th>Release</th><th>Price</th><th>Rating</th></tr></thead>
<tbody>
@foreach (var m in Model)
{
    <tr>
    <td>@m.Title</td>
    <td>@m.Genre</td>
    <td>@m.ReleaseDate?.ToString("yyyy-MM-dd")</td>
    <td>@m.Price.ToString("0.00")</td>    
    <td>@m.Rating.ToString("0.00")</td>
    <td>
    <a asp-action="Details" asp-route-id="@m.Id">Details</a> |
    <a asp-action="Edit" asp-route-id="@m.Id">Edit</a> |
    <a asp-action="Delete" asp-route-id="@m.Id">Delete</a>
    </td>
    </tr>
}
</tbody>
</table>
